# AI发展模拟器 - UI优化需求文档

## 引言

本文档定义了针对AI发展模拟器游戏界面的三项UI优化需求。这些优化旨在提升界面的紧凑性、连贯性和用户体验，使游戏流程更加流畅自然。

## 需求

### 需求 1：词条卡片间距优化

**用户故事：** 作为玩家，我希望词条卡片布局更加紧凑，以便在有限的屏幕空间内查看更多内容，提升信息密度。

#### 验收标准

1. WHEN 玩家进入词条选择界面 THEN 系统 SHALL 显示内边距极小的词条卡片（padding从p-3降低到p-2）
2. WHEN 玩家查看词条网格布局 THEN 系统 SHALL 显示卡片间距极小的布局（gap从gap-4降低到gap-2）
3. WHEN 玩家进入词条保留界面 THEN 系统 SHALL 应用与词条选择界面一致的紧凑间距设置
4. WHEN 优化完成后 THEN 系统 SHALL 确保文字内容仍然清晰可读，不会因过度紧凑而影响可读性

### 需求 2：结束界面整合优化

**用户故事：** 作为玩家，我希望游戏结局能够自然地融入事件流中，而不是突然跳转到独立页面，以保持游戏体验的连贯性。

#### 验收标准

1. WHEN 触发结局事件 THEN 系统 SHALL 将结局信息作为特殊事件卡片显示在事件列表的末尾
2. WHEN 显示结局事件 THEN 系统 SHALL 使用与普通事件一致的卡片样式，但通过特殊的视觉标识（如边框颜色、背景色）区分结局事件
3. WHEN 结局事件显示后 THEN 系统 SHALL 在结局事件卡片下方显示词条保留选项和"返回主菜单"按钮
4. WHEN 玩家查看结局 THEN 系统 SHALL 停止响应点击生成新事件的交互，防止结局后继续游戏
5. WHEN 结局显示完成 THEN 系统 SHALL 取消独立的结束页面渲染函数（renderEndingPage）

### 需求 3：结束信息简化

**用户故事：** 作为玩家，我希望结局界面专注于叙事内容，移除冗余的数值信息，以获得更沉浸的故事体验。

#### 验收标准

1. WHEN 显示结局事件 THEN 系统 SHALL 仅显示结局名称和结局描述
2. WHEN 显示结局事件 THEN 系统 SHALL 不显示当前资产数值
3. WHEN 显示结局事件 THEN 系统 SHALL 不显示属性评级信息（S/A/B/C/D）
4. WHEN 显示结局事件 THEN 系统 SHALL 不显示详细的属性值列表
5. WHEN 显示结局事件 THEN 系统 SHALL 保留词条保留功能和返回主菜单按钮

## 技术实现要点

### 涉及的文件
1. `/js/preparationPage.js` - 词条选择界面的间距优化
2. `/js/experiencePage.js` - 结束界面整合和信息简化
3. `/js/main.js` - 游戏流程控制逻辑调整

### 关键设计决策

#### 1. 词条卡片间距调整
- 将卡片内边距从 `p-3` 改为 `p-2`
- 将网格间距从 `gap-4` 改为 `gap-2`
- 确保在词条选择和词条保留两个场景中保持一致

#### 2. 结局事件的视觉设计
- 使用特殊的边框颜色（如金色或紫色）标识结局事件
- 使用渐变背景或特殊图标突出结局的重要性
- 保持与普通事件卡片相同的基础结构，确保视觉连贯性

#### 3. 交互逻辑调整
- 在 `experiencePage.js` 中添加结局事件的特殊渲染逻辑
- 在结局事件后禁用点击生成新事件的功能
- 在结局事件卡片下方添加词条保留UI和返回按钮
- 移除 `main.js` 中对 `renderEndingPage` 的调用

#### 4. 状态管理
- 保持现有的游戏状态管理逻辑不变
- 结局判定和游戏结束标记的设置保持不变
- 仅调整UI渲染方式，不改变核心游戏逻辑

## 边界情况处理

1. **移动端适配**：确保紧凑布局在小屏幕设备上仍然可用
2. **长文本处理**：确保结局描述较长时能够正确显示（滚动或自动换行）
3. **快速点击**：防止玩家在结局显示前快速点击导致的异常
4. **词条保留交互**：确保在整合后的界面中词条保留功能正常工作

## 成功标准

1. 词条卡片布局紧凑，屏幕空间利用率提升
2. 结局事件自然融入事件流，无突兀的页面跳转
3. 结局界面简洁清晰，专注于叙事内容
4. 所有交互功能正常，无bug或异常行为
5. 在桌面端和移动端都有良好的显示效果
