# AI发展模拟器 - 实施计划

## 任务清单

### 第一阶段：项目基础架构搭建

- [ ] 1. 创建项目基础结构和HTML入口
  - 创建index.html作为唯一入口文件
  - 引入Tailwind CSS CDN
  - 设置基础HTML结构和meta标签
  - 添加With签名到页面底部
  - _需求：1, 12_

- [ ] 2. 创建游戏数据文件（JSON）
  - 创建traits.json存储词条数据（至少20个白色、10个蓝色及以上）
  - 创建events.json存储事件数据（至少20个影响发展、20个趣闻）
  - 定义词条数据结构：id, name, description, rarity, effects
  - 定义事件数据结构：id, name, description, type, conditions, effects, tags
  - 确保内容幽默风趣，取材自LLM相关新闻和趣事
  - _需求：9, 10, 14_

### 第二阶段：核心游戏逻辑模块

- [ ] 3. 实现游戏状态管理模块（gameState.js）
  - 定义游戏状态数据结构（当前阶段、回合数、资产、属性、词条、状态标记）
  - 实现localStorage持久化功能
  - 实现状态初始化、保存、加载、清除方法
  - 实现保留词条的存储和读取
  - _需求：11, 13_

- [ ] 4. 实现词条系统模块（traitSystem.js）
  - 实现词条抽取逻辑（按稀有度权重随机）
  - 实现保留词条的强制包含逻辑
  - 实现词条选择验证（必须选3个）
  - 实现词条效果应用逻辑
  - _需求：2, 3, 8, 9_

- [ ] 5. 实现事件系统模块（eventSystem.js）
  - 实现事件筛选逻辑（基于回合数、词条、资产、属性、决策点数、状态标记）
  - 实现事件随机选择算法
  - 实现事件效果应用（更新资产、属性、状态标记）
  - 实现结局触发判定逻辑
  - 处理边界情况（无符合条件事件时的降级策略）
  - _需求：6, 7, 10, 13_

- [ ] 6. 实现属性系统模块（attributeSystem.js）
  - 实现5个核心属性的随机初始化
  - 实现决策点数分配逻辑（共10点）
  - 实现属性值更新和验证
  - 实现属性对事件的影响计算
  - _需求：4, 13_

### 第三阶段：UI界面实现

- [ ] 7. 实现落地页UI（landingPage.js）
  - 创建落地页组件（标题、说明、开始游戏按钮）
  - 实现现代化美观的UI设计
  - 实现开始游戏按钮点击事件
  - 实现页面切换逻辑
  - _需求：1, 12_

- [ ] 8. 实现准备阶段UI（preparationPage.js）
  - 创建10连抽界面（按钮和动画效果）
  - 创建词条选择界面（卡片式布局，显示名称、描述、稀有度颜色）
  - 创建属性分配界面（5个属性面板，点数分配控件）
  - 实现选中状态视觉反馈
  - 实现按钮启用/禁用逻辑
  - 实现页面间的平滑过渡动画
  - _需求：2, 3, 4, 12_

- [ ] 9. 实现体验阶段UI（experiencePage.js）
  - 创建顶部信息栏（资产和5个属性值显示）
  - 创建事件记录栏（卡片式布局，时间顺序展示）
  - 实现点击任意位置生成事件的交互
  - 实现自动滚动到最新事件
  - 实现结局展示界面（名称、描述、词条保留选项、返回按钮）
  - 实现结局后停止交互
  - _需求：5, 6, 7, 8, 12_

### 第四阶段：主控制器和集成

- [ ] 10. 实现主控制器（main.js）
  - 实现游戏流程控制（落地页→准备→体验→结局→落地页）
  - 集成所有模块（状态管理、词条、事件、属性、UI）
  - 实现页面路由切换逻辑
  - 实现游戏初始化和重置
  - 加载JSON数据文件
  - 处理页面刷新时的状态恢复
  - 确保游戏可无限次重复进行
  - _需求：13_

### 第五阶段：测试和优化

- [ ] 11. 完善响应式设计和用户体验
  - 确保桌面和移动设备上的良好显示
  - 优化动画和过渡效果
  - 完善视觉反馈（悬停、点击、选中等）
  - 测试完整游戏流程
  - 修复发现的bug
  - _需求：12, 13_

## 技术实现要点

### 项目结构
```
/
├── index.html              # 唯一HTML入口
├── data/
│   ├── traits.json        # 词条数据
│   └── events.json        # 事件数据
└── js/
    ├── main.js            # 主控制器
    ├── gameState.js       # 状态管理
    ├── traitSystem.js     # 词条系统
    ├── eventSystem.js     # 事件系统
    ├── attributeSystem.js # 属性系统
    ├── landingPage.js     # 落地页UI
    ├── preparationPage.js # 准备阶段UI
    └── experiencePage.js  # 体验阶段UI
```

### 技术栈
- 纯静态HTML页面（无框架）
- Tailwind CSS（通过CDN引入）
- ESModule语法组织JavaScript
- localStorage实现数据持久化
- JSON文件存储游戏数据

### 关键设计决策

1. **模块化设计**：每个功能模块独立为一个JS文件，通过ESModule导入导出
2. **数据驱动**：词条和事件通过JSON文件维护，便于扩展和修改
3. **状态管理**：集中式状态管理，所有游戏数据存储在gameState中
4. **事件筛选**：多条件筛选算法，支持复杂的触发逻辑
5. **UI组件化**：每个页面作为独立组件，通过模板字符串生成HTML

### 稀有度权重设置
- 白色（common）：79%
- 蓝色（rare）：16%
- 紫色（epic）：4%
- 金色（legendary）：1%

### 结局触发条件
- 回合数 >= 30
- 资产 <= 0
- 特定状态标记（如"破产"、"监管关停"等）

## 实施顺序说明

任务按照依赖关系排序：
1. 先搭建基础架构（任务1-2）
2. 再实现核心逻辑模块（任务3-6）
3. 然后实现UI界面（任务7-9）
4. 最后集成和优化（任务10-11）

每个任务完成后需要确保：
- 代码符合ESModule规范
- 函数和变量命名清晰
- 添加必要的注释
- 处理边界情况和错误
